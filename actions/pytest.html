<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PyTest &mdash; Internal Actions 1.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="https://cdn.rawgit.com/aexmachina/jquery-bonsai/master/jquery.bonsai.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="https://cdn.rawgit.com/aexmachina/jquery-bonsai/master/jquery.bonsai.js"></script>
        <script src="../_static/traceability.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Setup Python" href="setup-python.html" />
    <link rel="prev" title="Docker Run" href="docker-run.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Internal Actions
          </a>
              <div class="version">
                0.0.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="build-docs.html">Build Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker-build-push.html">Docker Build and Push</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker-run.html">Docker Run</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">PyTest</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#pytest">pytest</a></li>
<li class="toctree-l2"><a class="reference internal" href="#templates">Templates</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="setup-python.html">Setup Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="sonarqube.html">SonarQube</a></li>
<li class="toctree-l1"><a class="reference internal" href="submodule-check.html">Submodule Check</a></li>
<li class="toctree-l1"><a class="reference internal" href="team-approval.html">Team Approval</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Internal Actions</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>PyTest</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/actions/pytest.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="pytest">
<h1>PyTest<a class="headerlink" href="#pytest" title="Permalink to this headline"></a></h1>
<section id="pytest">
<h2>pytest<a class="headerlink" href="#pytest" title="Permalink to this headline"></a></h2>
<p>This action will set up python, install requirements, and then run pytest with code coverage capture turned on and reported in XML format. The test result and code coverage files will be uploaded as an artifact called <code class="docutils literal notranslate"><span class="pre">test-reports</span></code> and can be used by subsequent jobs/steps.</p>
<p>This action will use a <code class="docutils literal notranslate"><span class="pre">.coveragerc</span></code> (or <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>, <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code>, or <code class="docutils literal notranslate"><span class="pre">tox.ini</span></code>) in the root directory of the calling repository to configure coverage running and reporting. Information in the configuration file will define the set of files that will have coverage information captured. See https://coverage.readthedocs.io/en/6.3.2/source.html for more information about source file configuration. Note that <code class="docutils literal notranslate"><span class="pre">relative_files</span></code> should be set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to integrate a coverage report into another tool like SonarQube, in which the absolute path of where files exist might be different. An example <code class="docutils literal notranslate"><span class="pre">.coveragerc</span></code> is included in this directory to be used if wanted.</p>
<p>This action can be called independently but is intended to be used as part of the <code class="docutils literal notranslate"><span class="pre">internal-actions/reusable-actions/sonarqube</span></code> action for test result and coverage report integration in a Sonar project. An example template for running pytest followed by SonarQube is included in that action’s directory.</p>
</section>
<section id="templates">
<h2>Templates<a class="headerlink" href="#templates" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># This template is intended to be incorporated as a workflow in another repository to gate pull requests
# behind passing results. It should not be used if the sonarqube workflow is running unit tests.
name: Run pytest

on:
  pull_request:
    types: [opened, edited, synchronize, reopened]

jobs:
  run-unit-tests:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        python-version: [ &#39;3.7&#39;, &#39;3.10&#39; ]
    steps:
      - name: Check out repository code
        uses: actions/checkout@v3
      - name: Run pytest
        uses: GenapsysInc/internal-actions/reusable-actions/pytest@main
        with:
          python-version: ${{ matrix.python-version }}
          requirements-txt: path/to/python/requirements.txt
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="docker-run.html" class="btn btn-neutral float-left" title="Docker Run" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="setup-python.html" class="btn btn-neutral float-right" title="Setup Python" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Genapsys.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>